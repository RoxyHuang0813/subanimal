from flask import Flask, render_template, request, session, redirect, url_for, make_response

import random
from waitress import serve

app = Flask(__name__)
app.secret_key = 'your_secure_key_123'  # 正式環境請用更複雜的金鑰

ANIMALS = {
    'squirrel': '松鼠型',
    'cheetah': '獵豹型',
    'owl': '貓頭鷹型',
    'raccoon': '浣熊型',
    'wolf': '狼型',
    'peacock': '孔雀型'
}


# 定義每種動物類型的隨機語錄
ANIMAL_QUOTES = {
    'squirrel': [
        "我存錢不是為了讓你亂花的，OK？",
        "別跟我比存款，我怕傷害你的自尊！",
        "折扣再低，也比不上存款帶來的心安！",
        "你說花錢快樂？存錢才是終極快感！",
        "我存錢的速度，比你剁手還快！",
        "有錢才有安全感，錢包比男友可靠！",
        "一想到存款變少，我的血壓就跟著下降！",
        "信用卡刷爆？對不起，我只習慣存滿！",
        "等意外來了，你才會羨慕我的存款！",
        "投資？不，我的理財哲學叫做：‘不花錢’！"
    ],
    'cheetah': [
        "我很大方，但不代表你可以A我！",
        "人生苦短，優惠有限，買了再說！",
        "錢不是存的，是用來體驗人生的！",
        "存錢等機會？機會根本不等人！",
        "買東西前考慮三天？不好意思，我已經用到第五天了！",
        "有賺有花，才是真正的享受人生！",
        "等我存夠錢？這東西都已經漲價了！",
        "先下單，等快遞來了再想這筆錢去哪了！",
        "銀行存款是別人的，手上的快樂才是自己的！",
        "別人精打細算，我精準下單！"
    ],
    'owl': [
        "沒有Excel輔助，這錢我是花不下去的！",
        "我不是不買，我是在等價格最低點！",
        "數據才是我的真愛，衝動？不存在的！",
        "這筆錢花不花，先讓我跑個回報率分析！",
        "想說服我買？請準備一份詳細報告！",
        "沒折扣、沒回饋、沒優惠？抱歉，沒興趣！",
        "沒有比較，就沒有傷害（和消費）！",
        "你說限時優惠？等等，我查一下是不是真的！",
        "衝動消費？不存在的，消費前我會查20篇心得文！",
        "買東西不是看價錢，是看‘值不值得’！"
    ],
    'raccoon': [
        "大家說好才是真的好，獨樂樂不如眾樂樂！",
        "朋友的推薦，比黃金還珍貴！",
        "沒朋友陪，這錢花起來就沒靈魂！",
        "團購99折？我立刻揪團！",
        "這東西好不好用？先問問群組再決定！",
        "買東西前不問朋友？這是什麼孤獨行為？",
        "省錢不是重點，重點是一起敗家才爽！",
        "沒朋友分享心得，我是不會下單的！",
        "別問我怎麼選，問我的朋友圈！",
        "你不買？那我也不買！我們一起理性！"
    ],
    'wolf': [
        "帶領團隊衝鋒陷陣，財富自然滾滾來！",
        "我的策略，就是讓錢為我工作！",
        "沒有資源？整合起來就有了！",
        "投資不只是錢，還有關係、資訊和時機！",
        "財富不是偶然，是精心佈局的結果！",
        "你還在猶豫，我已經在下一步棋了！",
        "精準出手，才是真正的財富自由之道！",
        "機會不等人，但我不等機會，我讓機會等我！",
        "花錢前要想，這筆錢能不能幫我賺更多？",
        "目標不是存錢，而是讓錢幫我賺更多錢！"
    ],
    'peacock': [
        "品味無價，預算只是個參考！",
        "我買的不是東西，是我的生活態度！",
        "讓人驚艷，是最值得的投資！",
        "錢不是問題，問題是怎麼花得漂亮！",
        "別問我為什麼買，因為值得！",
        "生活要有儀式感，錢包也要跟上！",
        "窮得只剩錢？我可不想這樣！",
        "我的風格，不需要打折！",
        "時尚是輪迴，但我的品味永遠超前！",
        "當你穿得夠好，銀行戶頭會自己變多！"
    ]
}

# 定義每種動物對應的大K老師對話
TEACHER_DIALOGUES = {
    'squirrel': '你是謹慎的松鼠型！小心謹慎，習慣為未來做足準備，銀行帳戶是你安全感的來源。你喜歡掌握一切，卻也容易陷入「永遠不夠」的焦慮循環。大K老師想跟你說：「當下的你，就已經夠安全了。」',

    'cheetah': '你是敏捷的獵豹型！行動迅速，喜歡抓住每一個機會。不過，衝太快有時會讓你忘記初衷，容易陷入「不賺就輸」的焦躁節奏中。大K老師想跟你說：「你可以慢下來，財富不會因此錯過你。」',

    'owl': '你是智慧的貓頭鷹型！頭腦清楚、善於分析，是理財界的冷靜智者。但也可能因為太理性，總在「想太多」與「做太少」之間打轉。大K老師想跟你說：「你值得信任，直覺也是一種智慧。」',

    'raccoon': '你是靈活的浣熊型！圓融靈活，重視人際關係，金錢常和「一起」連結。但有時太在意別人的想法，容易忽略自己的需求。大K老師想跟你說：「你不必討好誰，也能被深深喜愛。」',

    'wolf': '你是領導的狼型！天生領導，擁有強烈的掌控慾與責任感。你的財富常建立在實力與影響力上，但也可能因壓力太大忘了自己。大K老師想跟你說：「放下控制，才是最大的掌握。」',

    'peacock': '你是耀眼的孔雀型！熱愛美感與表現，懂得用金錢打造獨特風格。外在閃耀時你最自信，但沒人看見時，也值得被愛。大K老師想跟你說：「你本身就是最珍貴的價值。」'
}



# 定義每種動物類型的故事
ANIMAL_STORIES = {
    'squirrel': '''
在一片寧靜的森林中，住著一隻名叫瑪莉的松鼠。
她的家位於一棵古老的橡樹上，四周被高高的樹木環繞，安全又安靜。
瑪莉總是為了未來做好準備，並且對每一分每一毫的資源都精打細算。
每到秋天，她就開始搜尋堅果，將它們小心翼翼地藏起來，以確保自己能度過漫長的冬天。

然而，隨著時間的推移，瑪莉發現自己愈加焦慮。
每當冬天快來時，她總是會擔心萬一有一天她的儲備不夠用，或者萬一她錯過了某個收集堅果的最佳時機。
這種焦慮不僅影響了她的睡眠，甚至讓她疏遠了身邊的朋友。

某天，瑪莉在整理堅果的時候，遇到了她的老朋友——一隻總是充滿笑容的小兔子，牠名叫比利。
比利看到瑪莉忙得不亦樂乎，便輕聲問道：「瑪莉，為什麼你總是這麼忙，從不輕鬆一下呢？」

瑪莉看了看比利，苦笑道：「我必須確保自己有足夠的食物過冬。
這樣才能保證安全，不會缺乏。」

比利聳了聳肩說：「可是你過度焦慮了呀。
生活不僅僅是為了積累資源，也需要和朋友們共享快樂。
或許你可以和我們一起去採摘一些新鮮的莓果，順便休息一下，也許這會讓你更有活力。」

瑪莉沉默了一會兒，心中充滿了掙扎。
她知道比利說的是對的，但她內心的恐懼讓她無法輕易放下那份焦慮。
最終，在比利的邀請下，瑪莉決定放下堅果，和朋友們一起去採摘莓果。
那天，她第一次真正感受到了放鬆，甚至笑了出來。

那晚，瑪莉躺在床上，感覺到一股久違的平靜。
她開始明白，儲蓄和計劃固然重要，但生活中的快樂和與朋友們的聯繫同樣不可忽視。
她對自己的未來不再過度擔心，而是學會了在積極準備的同時，也享受當下。

療癒提示： 當你過度專注於未來，可能會忽略眼前的美好。
學會適時放下焦慮，讓當下的快樂與安全感共存。
    ''',
    'cheetah': '''
在遼闊的草原上，雷納德總是以迅雷不及掩耳之勢行動。
他是一隻敏捷的獵豹，行動快速、果斷且直覺。
他總是覺得，機會稍縱即逝，錯過一秒鐘可能就錯過了成功。
因此，每當有新的機會出現，他總是第一時間抓住，無論是捕捉獵物還是投資生意，雷納德都會毫不猶豫地投入其中。

這樣的生活讓雷納德積累了不少成就，但也帶來了不少問題。
一次，雷納德聽聞遠處的山谷中有一片極為肥沃的土地，他立刻決定趕過去，準備在那裡進行投資。
他沒有仔細分析這片土地的情況，也沒有聽取過其他動物的意見，只是憑著直覺行動。
結果，他的投資失敗，損失了大量的資源。

當雷納德心情低落地回到家時，他的朋友——一隻年長的老鷹飛來，輕聲問道：「雷納德，為什麼這次的決策會如此急躁呢？」

雷納德沮喪地回答：「我總是怕錯過任何機會，甚至錯過了成功的瞬間。」

老鷹眨了眨眼，說道：「成功不僅僅是速度，還需要智慧。
有時候，思考的片刻會帶來比衝動行動更多的回報。
耐心和計劃，也是一種力量。」

雷納德愣了一會兒，然後點了點頭。
他意識到自己總是過於焦急，無法冷靜下來。
於是，他決定放慢腳步，學會聆聽他人的建議，也學會讓每一個決策都更加深思熟慮。

幾個月後，雷納德再次面對一個新的投資機會，這一次，他耐心地觀察，並且與朋友們討論，最終做出了成功的決策。

療癒提示： 衝動的決策可能帶來即時的回報，但耐心和深思熟慮的決策，往往能帶來長久的成功。
學會放慢腳步，給自己更多的時間來思考。
    ''',
    'owl': '''
艾德華是一隻極為聰明的貓頭鷹，他的生活總是充滿了計劃和邏輯。
他喜歡分析每一個細節，無論是獵物的分布還是金錢的流動，他都會通過數據來做出最優選擇。
這種分析的習慣使得艾德華幾乎不會犯錯，並且在森林中成為了眾所周知的財務和策略專家。

然而，這樣的完美主義讓艾德華的生活變得越來越壓力山大。
每當他面對任何重要的決策，他總是反覆推敲，力求達到最佳結果。
這樣的過程讓他很難下定決心，時常錯失了最佳的機會。

一天，艾德華的朋友，一隻幽默的小松鼠來到他面前，笑著說：「你每次都在分析這麼多東西，為什麼不試試直覺呢？
你知道的，過度分析只會讓你感到困惑。」

艾德華聽後，皺了皺眉，語氣認真地說：「可是，怎麼能不分析清楚呢？
只有做出最完美的決策，才能確保成功。」

小松鼠輕輕搖頭：「有時候，過度分析反而會讓你失去行動的勇氣。
你要學會信任自己，也要相信，錯誤有時候也能帶來學習的機會。」

艾德華陷入了沉思。
他決定開始放下那些過於細緻的分析，學會聆聽自己的內心。
在接下來的一段時間裡，他開始進行一些小的嘗試，讓直覺引導自己做決策，結果發現，這種方式竟然讓他感到更加自由和輕鬆。

療癒提示： 完美的決策不一定會帶來最好的結果。
學會接受不完美，並相信直覺能帶來意想不到的收穫。
    ''',
    'raccoon': '''
羅伯特是一隻熱愛社交的浣熊，他的日子總是充滿了忙碌和活動。
他有著無數的朋友，無論是森林中的狐狸、兔子，還是樹上生活的鳥兒，幾乎每個動物都和他保持著良好的聯繫。
羅伯特擅長與他人合作，並且對於群體的需求特別敏感。
這讓他總是能在團體中迅速站穩腳跟，並且獲得許多資源。

然而，這樣的依賴讓羅伯特也有了困擾。
他經常會為了迎合他人的需求，而忽略自己的想法，甚至有時會感到自己在做事時缺乏自主性。
最令人困擾的是，他經常無法拒絕他人，無論是朋友的借貸請求，還是社群中的共同投資，羅伯特總是會答應，儘管這樣的決定往往會讓他自己的財務狀況變得吃緊。

有一天，羅伯特在森林裡碰到了他的小時候的朋友——一隻成熟穩重的刺蝟。
刺蝟看到羅伯特忙得不亦樂乎，便走過來問道：「羅伯特，你怎麼這麼忙，總是為別人著想，自己卻看起來很疲憊？」

羅伯特苦笑著說：「我只想要大家開心，總是難以拒絕他們的請求。」

刺蝟搖了搖頭，語氣溫和地說：「你要記住，真正的關心是給自己一點空間，讓自己也能過得快樂。
當你總是為他人而活，最終會迷失自己的方向。」

羅伯特聽後陷入了沉思，終於明白，自己不該總是將他人的需求放在首位。
他開始學會拒絕不必要的請求，並且開始專注於自己真正的需求。
隨著時間的推移，羅伯特發現，他能夠更好地照顧自己，同時仍然保持良好的社交關係。
他學會了平衡自己和他人之間的關係，找到了屬於自己的獨立空間。

療癒提示： 幫助他人固然重要，但也要學會為自己設置界限，讓自己保持健康的平衡，才能更好地給予他人。
    ''',
    'wolf': '''
在森林的邊緣，有一隻名叫卡爾的狼，他是一位天生的領袖。
卡爾從小就擁有過人的智慧和強大的領導力，他總是能夠帶領著自己的狼群走出困境，並且在追逐獵物時總能夠快速做出正確的決策。
卡爾不僅是一位優秀的戰略家，還擅長整合資源，並且能夠把群體的力量發揮到極致。

然而，卡爾的領導風格也帶來了一些問題。
他常常專注於大局，忽略了身邊每個成員的需求。
這使得他的狼群雖然在外界的挑戰中屢屢獲勝，但內部卻漸漸出現了不和。
狼群的其他成員開始感到被忽視，他們對卡爾的決策產生了疑慮，並且開始感到疏遠。

有一天，卡爾遇到了年長的白鹿，白鹿是森林中的智者，常年生活在山林間，並且總是給人留下深刻的印象。
白鹿見到卡爾時，輕輕地說：「你似乎在努力維持著一個強大的領導地位，但你可曾發現，有時候真正的力量來自於關心和聆聽他人的心聲？」

卡爾低下頭，沉默了一會兒。
白鹿繼續說：「一個成功的領導者不僅僅是決策者，更是關懷者。
當你忽視個體的需求，群體的力量也會逐漸消耗。」

卡爾聽後開始深刻反思。
他回到狼群中，花更多的時間去了解每一位成員的心聲，並且鼓勵他們提出自己的想法。
這樣一來，狼群的內部關係得到了修復，大家的合作更加默契，也讓卡爾在領導上更加得心應手。

療癒提示： 一個強大的領袖不僅能夠做出決策，更能夠理解和關心每一位成員。
學會聆聽，能讓你成為真正的領導者。
    ''',
    'peacock': '''
費爾南多是一隻光鮮亮麗的孔雀，他的羽毛五彩斑斕，總是吸引著眾多動物的目光。
費爾南多極其重視自己的形象和社交圈，他認為，金錢不僅是用來滿足生活所需，還是用來展示自己的地位和身份。
他總是喜歡以最新的時尚和最豪華的物品來提升自己的社會形象，並且不吝嗇於在社交場合展示自己的財富。

然而，隨著時間的流逝，費爾南多漸漸發現，儘管他在社交場合總是受到關注和羨慕，但內心卻越來越空虛。
他發現自己無法真正享受這些奢華的物品，因為每一次購買背後，總是充滿了為了滿足他人眼光的壓力。
費爾南多開始懷疑，自己到底是否為了真正的快樂而消費，還是僅僅為了維持一個表面上的形象。

某一天，費爾南多在湖邊遇見了一隻老烏鴉，這隻烏鴉生活簡樸，卻從不缺少快樂。
費爾南多忍不住問道：「你從不追求華麗的東西，為什麼你總是那麼快樂？」

老烏鴉微笑著回答：「真正的快樂來自內心，而非外在的物品。
你以為金錢能帶來的快樂，是短暫的虛榮。
當你放下對他人評價的依賴，你會發現，自己才是最重要的。」

費爾南多聽後深受觸動，他決定改變自己對金錢的看法，開始將財富用來實現自己的內心需求，而非單純地展示外在的形象。
他發現，這樣的生活不僅讓他擁有更多的自由，也讓他重新找回了真正的快樂。

療癒提示： 物質的外在光鮮只是短暫的，真正的滿足來自於內心的平靜與自信。
學會放下他人的眼光，去追尋屬於自己的快樂。
    '''
}
# 新增故事頁面路由
@app.route('/story/<animal>')
def story(animal):
    story_content = ANIMAL_STORIES.get(animal, '沒有找到該動物的故事。')
    return render_template('story.html', story_content=story_content, animal_name=ANIMALS.get(animal, '未知動物'))

# 新增分享頁面路由
@app.route('/share')
def share():
    return render_template('share.html')

QUESTIONS = [
    {
        'question': '看到便利商店出了新的限量商品，你的反應是？',
        'options': [
            {'text': '先上網查怎麼買才是C/P值最高', 'type': 'owl'},
            {'text': '喜歡不用等，馬上買', 'type': 'cheetah'},
            {'text': '好東西就是要買給好朋友分享', 'type': 'raccoon'},
            {'text': '我等賣不完打折再來買', 'type': 'squirrel'},
            {'text': '買來轉賣給沒時間排隊的主管', 'type': 'wolf'},
            {'text': '上新聞好熱門，我也來湊熱鬧', 'type': 'peacock'}
        ]
    },
    {
        'question': '今年年終發了獎金10萬元，你會？',
        'options': [
            {'text': '先存起來後面再想', 'type': 'squirrel'},
            {'text': '比特幣是低點，剛好有錢可以買', 'type': 'cheetah'},
            {'text': '發年終換我請朋友吃牛排', 'type': 'raccoon'},
            {'text': '30%存起來/30%購物/剩下40%投資', 'type': 'owl'},
            {'text': '回購公司股票當投資', 'type': 'wolf'},
            {'text': '3C跟家電可以換新了', 'type': 'peacock'}
        ]
    },
    {
        'question': '面對投資虧損，你的反應是？',
        'options': [
            {'text': '我以後再也不投資了', 'type': 'squirrel'},
            {'text': '趁低點加碼攤平', 'type': 'cheetah'},
            {'text': '跟銀行的朋友討論一下', 'type': 'raccoon'},
            {'text': '重新分析研究後再來處理', 'type': 'owl'},
            {'text': '該賣就賣，當斷則斷', 'type': 'wolf'},
            {'text': '不想面對，先放著以後再說', 'type': 'peacock'}
        ]
    },
    {
        'question': '選擇理財商品時，你最重視？',
        'options': [
            {'text': '風險越低越好，定存最好', 'type': 'squirrel'},
            {'text': '高風險高回報，賭賭看', 'type': 'cheetah'},
            {'text': '朋友推薦跟著買', 'type': 'raccoon'},
            {'text': '先等我好好分析完再決定', 'type': 'owl'},
            {'text': '要能随時變現，儲蓄險不買', 'type': 'wolf'},
            {'text': '是名人推薦我就買', 'type': 'peacock'}
        ]
    },
    {
        'question': '朋友向你借錢，你會？',
        'options': [
            {'text': '想辦法找理由拒絕', 'type': 'squirrel'},
            {'text': '親兄弟也要算利息', 'type': 'cheetah'},
            {'text': '雖然為難還是勉強答應', 'type': 'raccoon'},
            {'text': '簽借據才借', 'type': 'owl'},
            {'text': '看他能用什麼來換', 'type': 'wolf'},
            {'text': '拍我馬屁我就答應', 'type': 'peacock'}
        ]
    },
    {
        'question': '你如何定義「財務自由」？',
        'options': [
            {'text': '存款夠用一輩子', 'type': 'squirrel'},
            {'text': '想要什麼就能買什麼', 'type': 'cheetah'},
            {'text': '錢只要夠用就好，家人朋友最重要', 'type': 'raccoon'},
            {'text': '被動收入>支出', 'type': 'owl'},
            {'text': '要有事業，沒有都是打工仔', 'type': 'wolf'},
            {'text': '貴婦那種就是啦', 'type': 'peacock'}
        ]
    },
    {
        'question': '當你發現朋友的財務狀況比你好，你會？',
        'options': [
            {'text': '焦慮自己存款不足', 'type': 'squirrel'},
            {'text': '我不能輸', 'type': 'cheetah'},
            {'text': '問問朋友怎麼做到的', 'type': 'raccoon'},
            {'text': '研究他的投資策略並調整自己', 'type': 'owl'},
            {'text': '思考如何才能賺更多錢', 'type': 'wolf'},
            {'text': '與其當守財奴還不如把錢花光', 'type': 'peacock'}
        ]
    },
    {
        'question': '你通常如何規劃一天的行程？',
        'options': [
            {'text': '每天都差不多，滿固定的', 'type': 'squirrel'},
            {'text': '不一定，看情況調整', 'type': 'cheetah'},
            {'text': '如果朋友揪我我都會去', 'type': 'raccoon'},
            {'text': '行事曆有安排每日行程', 'type': 'owl'},
            {'text': '年度目標有達到就好，不用分太細', 'type': 'wolf'},
            {'text': '喜歡拓展社交圈，人多的地方都去', 'type': 'peacock'}
        ]
    },
    {
        'question': '面對財務壓力時，你的解決方式是？',
        'options': [
            {'text': '反覆計算存款還夠不夠', 'type': 'squirrel'},
            {'text': '壓力越大越愛亂買', 'type': 'cheetah'},
            {'text': '找朋友訴苦', 'type': 'raccoon'},
            {'text': '越分析越清楚，多思考', 'type': 'owl'},
            {'text': '找別人合作，借力使力', 'type': 'wolf'},
            {'text': '先不管，轉移注意力', 'type': 'peacock'}
        ]
    },
    {
        'question': '聽到一種新的理財工具時的第一反應？',
        'options': [
            {'text': '我只選保本型商品', 'type': 'squirrel'},
            {'text': '有趣，先買一點試試看', 'type': 'cheetah'},
            {'text': '跟家人朋友一起討論', 'type': 'raccoon'},
            {'text': '要做功課，詳細分析才知道', 'type': 'owl'},
            {'text': '會先問一些專業人士的意見', 'type': 'wolf'},
            {'text': '如果有大銀行推薦應該沒問題', 'type': 'peacock'}
        ]
    },
    {
        'question': '感覺經濟衰退時會怎麼做？',
        'options': [
            {'text': '減少消費，節省到極限', 'type': 'squirrel'},
            {'text': '多買樂透看會不會中頭獎', 'type': 'cheetah'},
            {'text': '多跟朋友聊聊看他們的情況', 'type': 'raccoon'},
            {'text': '重新計算自已的資產再決定', 'type': 'owl'},
            {'text': '就在等這個機會買法拍屋', 'type': 'wolf'},
            {'text': '不管，又不一定會發生', 'type': 'peacock'}
        ]
    },
    {
        'question': '如果要去旅行，你的想法是？',
        'options': [
            {'text': '預算最重要，超出太多就不考慮了', 'type': 'squirrel'},
            {'text': '就說走就走，機票買了再說', 'type': 'cheetah'},
            {'text': '先問朋友，有人去過不踩雷', 'type': 'raccoon'},
            {'text': '詳細比較C/P值，出國也要精打細算', 'type': 'owl'},
            {'text': '旅行很無聊，有助於事業才考慮去', 'type': 'wolf'},
            {'text': '熱門打卡點、高級飯店、美食缺一不可', 'type': 'peacock'}
        ]
    }
]

@app.route('/')
def index():
    session.clear()
    return render_template('index.html')

@app.route('/test', methods=['GET', 'POST'])
def test():
    if 'answers' not in session:
        session['answers'] = []
    
    if request.method == 'POST':
        selected_type = request.form.get('animal_type')
        session['answers'].append(selected_type)
        session.modified = True
    
    if len(session['answers']) >= len(QUESTIONS):
        return redirect('/result')
    
    current_q = QUESTIONS[len(session['answers'])]
    random.shuffle(current_q['options'])
    
    return render_template('test.html',
                         question=current_q['question'],
                         options=current_q['options'],
                         progress=len(session['answers'])+1,
                         total=len(QUESTIONS))

@app.route('/result')
def result():
    if 'answers' not in session or len(session['answers']) != len(QUESTIONS):
        return redirect(url_for('index'))

    counts = {}
    for animal in session['answers']:
        counts[animal] = counts.get(animal, 0) + 1
    result_type = max(counts, key=lambda k: counts[k])



    teacher_dialogue = TEACHER_DIALOGUES.get(result_type, '恭喜你完成測驗！快把專屬你的財富性格分享給朋友吧！')
    random_quote = random.choice(ANIMAL_QUOTES.get(result_type, ["歡迎來到潛意識財富森林！"]))


    response = make_response(render_template(
        'result.html',
        animal=result_type,
        animal_name=ANIMALS[result_type],

        teacher_dialogue=teacher_dialogue,
        random_quote=random_quote

    ))
    response.headers['Cache-Control'] = 'no-store, must-revalidate'
    response.headers['Pragma'] = 'no-cache'
    response.headers['Expires'] = '0'
    return response

if __name__ == '__main__':
    app.run(debug=True)
